@custom-variant dark (&:is(.dark *));

:root {
  --font-size: 16px;
  
  /* ===== ESSENTIAL 6-COLOR PALETTE ===== */
  /* Core Colors */
  --teal: #00A896;                /* Brand, links, selected */
  --coral: #FF6B6B;               /* CTAs only */
  --black: #2D3436;               /* Primary text */
  --gray: #666666;                /* Secondary text */
  --light-gray: #E8E8E8;          /* Borders */
  --background: #fef8f2;          /* Page background - warm orangish */
  
  /* Derived Hover States (10% darker) */
  --teal-hover: #008B7A;          /* Teal darkened 10% */
  --coral-hover: #E55555;         /* Coral darkened 10% */
  
  /* Derived Light Backgrounds (for selected states) */
  --teal-light: #E0F5F3;          /* Light teal background */
  --coral-light: #FFE8E8;         /* Light coral background */
  
  /* System Mappings (for framework compatibility) */
  --foreground: var(--black);
  --primary: var(--teal);
  --primary-foreground: #ffffff;
  --secondary: var(--light-gray);
  --secondary-foreground: var(--black);
  --muted: var(--light-gray);
  --muted-foreground: var(--gray);
  --border: var(--light-gray);
  --input: transparent;
  --input-background: #ffffff;
  --ring: var(--teal);
  --card: #ffffff;
  --card-foreground: var(--black);
  --popover: #ffffff;
  --popover-foreground: var(--black);
  
  /* Typography & Spacing */
  --font-weight-medium: 500;
  --font-weight-normal: 400;
  --radius: 0.75rem;
  --radius-2xl: 1rem;             /* Larger border radius for cards */
  
  /* Standardized Container Widths */
  --container-lg: 32rem;          /* 512px - Small screens */
  --container-xl: 36rem;          /* 576px - Medium screens */
  --container-2xl: 42rem;         /* 672px - Large screens */
  --container-3xl: 48rem;         /* 768px - Extra large screens */
  
  /* Spacing multiplier (4px base unit) */
  --spacing: 0.25rem;
  
  /* Standardized spacing */
  --screen-padding-top: 1.25rem;
  --screen-padding-top-sm: 1.75rem;
  --progress-margin-bottom: 2rem;
  --branding-margin-bottom: 0.75rem;
  
  /* Animation timing tokens - Slower, more refined */
  --timing-fast: 350ms;
  --timing-normal: 450ms;
  --timing-slow: 650ms;
  --timing-page: 500ms;
  
  /* Animation easing - Smoother curves */
  --easing-elegant: cubic-bezier(0.25, 0.1, 0.25, 1);
  --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/**
 * Base typography. This is not applied to elements which have an ancestor with a Tailwind text class.
 */
@layer base {
  :where(:not(:has([class*=" text-"]), :not(:has([class^="text-"])))) {
    h1 {
      font-size: var(--text-2xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h2 {
      font-size: var(--text-xl);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h3 {
      font-size: var(--text-lg);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    h4 {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    p {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }

    label {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    button {
      font-size: var(--text-base);
      font-weight: var(--font-weight-medium);
      line-height: 1.5;
    }

    input {
      font-size: var(--text-base);
      font-weight: var(--font-weight-normal);
      line-height: 1.5;
    }
  }
}

html {
  font-size: var(--font-size);
}

body {
  font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  font-size: 16px;
  font-weight: 400;
  line-height: 1.5;
  background: var(--background);
  min-height: 100vh;
  color: var(--foreground);
}

#root {
  background: transparent;
  min-height: 100vh;
}

@layer utilities {
  .transition-elegant {
    transition-timing-function: var(--easing-elegant);
  }
  
  /* GPU-accelerated animations */
  .animate-in {
    animation: fadeSlideIn var(--timing-normal) var(--easing-elegant) forwards;
    will-change: transform, opacity;
    backface-visibility: hidden;
  }
  
  .fade-in {
    animation: fadeIn var(--timing-normal) var(--easing-elegant) forwards;
    will-change: opacity;
  }
  
  .slide-in-from-right-5 {
    animation: slideInFromRight var(--timing-normal) var(--easing-elegant) forwards;
    will-change: transform;
    backface-visibility: hidden;
  }
  
  /* GPU acceleration for interactive elements */
  .gpu-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
  }
  
  /* Accessibility: Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .animate-in,
    .fade-in,
    .slide-in-from-right-5 {
      animation: none;
      transform: none;
      opacity: 1;
    }
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    /* Disable all will-change properties to prevent unnecessary compositing */
    *,
    *::before,
    *::after {
      will-change: auto !important;
    }
  }
  
  /* Mobile touch target utilities */
  .touch-target-sm {
    min-height: 44px;
    min-width: 44px;
  }
  
  .touch-target-md {
    min-height: 48px;
    min-width: 48px;
  }
  
  .touch-target-lg {
    min-height: 56px;
    min-width: 56px;
  }
  
  /* Ensure proper spacing for mobile */
  .mobile-spacing {
    margin: 8px;
  }
  
  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

/* GPU-accelerated keyframes using translate3d */
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translate3d(20px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInFromRight {
  from {
    transform: translate3d(20px, 0, 0);
  }
  to {
    transform: translate3d(0, 0, 0);
  }
}

/* Tooltip animations */
@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-2px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Keyboard focus indicators for accessibility (WCAG AA compliance) */
/* Using ring-based focus states for modern, consistent appearance */
*:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(0, 168, 150, 0.4);
  border-radius: 0.25rem;
}

button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[role="button"]:focus-visible,
[role="checkbox"]:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(0, 168, 150, 0.4);
  border-radius: 0.25rem;
}

/* Pill buttons specific */
.pill-button:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(0, 168, 150, 0.4);
}

/* Single select buttons */
.option-button:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px rgba(0, 168, 150, 0.4);
}

/* Dynamic viewport height for mobile keyboards */
.screen-container {
  min-height: 100dvh;
}

/* Fallback for older browsers */
@supports not (height: 100dvh) {
  .screen-container {
    min-height: 100vh;
  }
}

/* Prevent pull-to-refresh on mobile */
body {
  overscroll-behavior-y: contain;
}

/* Override browser focus states with teal brand color */
*:focus {
  outline: none;
}

/* Remove all browser default focus effects on inputs and selects */
input:focus,
select:focus,
textarea:focus {
  outline: none !important;
  box-shadow: none !important;
  border-radius: 12px;
  /* border-radius: inherit; */
}

/* Remove browser chrome from date/time inputs */
input[type="date"]::-webkit-calendar-picker-indicator,
input[type="time"]::-webkit-calendar-picker-indicator,
input[type="datetime-local"]::-webkit-calendar-picker-indicator {
  opacity: 0.6;
  cursor: pointer;
}

/* Remove ALL ring effects from inputs and textareas to prevent double borders */
input, textarea, select {
  --tw-ring-shadow: 0 0 #0000 !important;
  box-shadow: none !important;
}

input:focus, textarea:focus, select:focus {
  --tw-ring-shadow: 0 0 #0000 !important;
  box-shadow: none !important;
}

/* Ensure date inputs don't get double borders or outlines */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
}

input[type="date"]:focus,
input[type="time"]:focus,
input[type="datetime-local"]:focus {
  outline: none !important;
  box-shadow: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}

/* Extra protection for date inputs */
input[type="date"]::-webkit-datetime-edit,
input[type="date"]::-webkit-datetime-edit-fields-wrapper {
  border: none !important;
  padding: 0;
}

/* Only apply focus-visible ring to interactive elements that don't have custom focus styles */
button:focus-visible:not([class*="border"]),
a:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 4px rgba(0, 168, 150, 0.4) !important;
  border-radius: 0.375rem;
}
